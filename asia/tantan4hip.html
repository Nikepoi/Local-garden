<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Player — tantan4hip</title>
<link rel="icon" href="favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<style>
  :root{ --bg:#071022; --muted:#98a8b3; --accent:#3b82f6; }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,#041027 0,#071129 100%);color:#e9f2fb}
  .wrap{max-width:980px;margin:18px auto;padding:16px}
  .card-player{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.05));border-radius:12px;overflow:hidden;box-shadow:0 12px 30px rgba(2,6,23,0.6)}
  .video-area{background:#000;position:relative}
  video{width:100%;height:auto;max-height:70vh;object-fit:contain;display:block;background:#000}
  .thumb-play{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none}
  .thumb-play .btn{pointer-events:auto;background:linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.2));border-radius:999px;padding:12px 16px;border:2px solid rgba(255,255,255,0.06);font-size:16px;color:#fff}
  .loading-indicator{position:absolute;right:12px;top:12px;padding:8px 12px;border-radius:999px;background:rgba(0,0,0,0.45);display:flex;align-items:center;gap:8px;visibility:hidden}
  .spinner-dot{width:9px;height:9px;border-radius:50%;background:#fff;opacity:.85;animation:spinPulse 1s linear infinite}
  @keyframes spinPulse{0%{transform:scale(.8);opacity:.7}50%{transform:scale(1.2);opacity:1}100%{transform:scale(.8);opacity:.7}}
  .top-meta{padding:12px 16px 0 16px}
  .title{font-size:20px;font-weight:800;color:#ffffff;margin:0 0 6px 0}
  .date{color:var(--muted);font-size:13px}
  .controls { padding:14px; border-top:1px solid rgba(255,255,255,0.03); }
  .btn-small { min-width:64px; padding:8px 10px; font-size:0.95rem; border-radius:10px; display:inline-flex; align-items:center; gap:8px; }
  .btn-play { min-width:88px; padding:10px 14px; font-size:1rem; }
  .seek-row { display:flex; align-items:center; gap:12px; margin-top:12px; }
  .time { width:50px; text-align:center; color:var(--muted); font-size:14px; }
  .downloads { padding:12px; border-top:1px solid rgba(255,255,255,0.02); background: rgba(2,6,15,0.35); }
  .downloads .heading { color:#ffffff; font-weight:700; display:flex;align-items:center;justify-content:space-between; gap:10px; }
  .download-btn { min-width:150px; text-align:left; background:transparent; border:1px solid rgba(255,255,255,0.06); color:#eaf4ff; padding:8px 12px; border-radius:8px; display:inline-flex; gap:8px; align-items:center; text-decoration:none; }
  .download-btn .bi { font-size:1.05rem; }
  .download-btn:hover{background:rgba(255,255,255,0.02)}
  .downloads-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:8px}
  .placeholder-none{color:var(--muted);padding:8px 0}
  @media(max-width:520px){ .btn-small{min-width:56px;padding:6px 8px;font-size:0.9rem} .btn-play{min-width:78px} .title{font-size:18px} }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card card-player">
      <div class="video-area">
        <video id="video" playsinline webkit-playsinline preload="metadata"></video>

        <div class="thumb-play" id="thumbPlay">
          <button id="thumbBtn" class="btn"><i class="bi bi-play-fill" style="font-size:16px"></i> Play</button>
        </div>

        <div class="loading-indicator" id="loading">
          <div class="spinner-dot"></div>
          <div class="spinner-dot" style="animation-delay:.12s"></div>
          <div class="spinner-dot" style="animation-delay:.24s"></div>
          <div style="color:var(--muted);font-size:13px">Memuat…</div>
        </div>
      </div>

      <div class="top-meta">
        <div class="title" id="title">tantan4hip</div>
        <div class="date" id="date"></div>
      </div>

      <div class="controls">
        <div class="d-flex flex-wrap align-items-center gap-2 mb-2">
          <button id="prev" class="btn btn-outline-light btn-small" title="Previous">
            <i class="bi bi-skip-start-fill"></i> Prev
          </button>

          <button id="play" class="btn btn-primary btn-play" title="Play/Pause">
            <i class="bi bi-play-fill"></i> Play
          </button>

          <button id="next" class="btn btn-outline-light btn-small" title="Next">
            <i class="bi bi-skip-end-fill"></i> Next
          </button>

          <button id="loop" class="btn btn-outline-light ms-2">Loop</button>

          <button id="dl" class="btn btn-outline-light btn-small ms-2" title="Download bagian yang sedang diputar">
            <i class="bi bi-download"></i> Download
          </button>

          <div class="ms-auto d-flex align-items-center gap-2">
            <label class="mb-0 me-1" style="color:var(--muted)">Speed</label>
            <select id="speed" class="form-select form-select-sm" style="width:90px">
              <option value="0.5">0.5x</option>
              <option value="0.75">0.75x</option>
              <option value="1" selected>1x</option>
              <option value="1.25">1.25x</option>
              <option value="1.5">1.5x</option>
              <option value="2">2x</option>
            </select>
            <button id="fs" class="btn btn-outline-light">Fullscreen</button>
          </div>
        </div>

        <div class="seek-row">
          <div class="time" id="current">0:00</div>
          <input id="seek" type="range" min="0" max="100" value="0" step="0.01" class="form-range" style="flex:1">
          <div class="time" id="duration">0:00</div>
        </div>
      </div>

      <div class="downloads">
        <div class="heading">
          <div>Full konten</div>
          <div class="text-muted small">klik tombol untuk buka</div>
        </div>
        <div id="downloadButtons" class="downloads-grid mt-2"></div>
      </div>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // ===== DATA: tantan4hip =====
  const videos = [
    "https://cdn.videy.co/0bIk32HR1.mp4",
    "https://cdn.videy.co/zQl3g2cy1.mp4",
    "https://cdn.videy.co/57nOSfVV1.mp4",
    "https://cdn.videy.co/hqA3469p1.mp4",
    "https://cdn.videy.co/PQ63Y8jp1.mp4",
    "https://cdn.videy.co/49HpCzA21.mp4",
    "https://cdn.videy.co/eUP8BHzm1.mp4"
  ];

  // Full konten: hanya full links (tidak tunjukkan list videy bagian)
  const downloads = {
    ucdrive: "https://uc-share.com/s/ec4f23f656bb4?la=en-us",
    terabox: "https://1024terabox.com/s/1YRye3xQfzfS1n_C4nZTYZw"
  };

  // ===== DOM refs =====
  const video = document.getElementById('video');
  const playBtn = document.getElementById('play');
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  const loopBtn = document.getElementById('loop');
  const dlBtn = document.getElementById('dl');
  const speedSel = document.getElementById('speed');
  const seek = document.getElementById('seek');
  const currentT = document.getElementById('current');
  const durationT = document.getElementById('duration');
  const titleEl = document.getElementById('title');
  const downloadsWrap = document.getElementById('downloadButtons');
  const thumbPlay = document.getElementById('thumbPlay');
  const thumbBtn = document.getElementById('thumbBtn');
  const loadingEl = document.getElementById('loading');

  let idx = 0;
  let isSeeking = false;

  // init
  titleEl.textContent = "tantan4hip";
  video.poster = ""; // no poster provided
  video.preload = "metadata";
  video.src = videos.length ? videos[0] : "";
  video.playbackRate = 1;
  speedSel.value = "1";

  function buildDownloadButtons(){
    downloadsWrap.innerHTML = "";
    const keys = Object.keys(downloads);
    if(keys.length === 0){
      downloadsWrap.innerHTML = '<div class="placeholder-none">Tidak ada link full konten.</div>';
      return;
    }
    if(downloads.ucdrive){
      const a = document.createElement('a');
      a.className = "download-btn";
      a.href = downloads.ucdrive;
      a.target = "_blank";
      a.rel = "noopener noreferrer nofollow";
      a.innerHTML = '<i class="bi bi-cloud-arrow-down-fill"></i><span>UCdrive — Full konten</span>';
      downloadsWrap.appendChild(a);
    }
    if(downloads.terabox){
      const b = document.createElement('a');
      b.className = "download-btn";
      b.href = downloads.terabox;
      b.target = "_blank";
      b.rel = "noopener noreferrer nofollow";
      b.innerHTML = '<i class="bi bi-cloud-arrow-down-fill"></i><span>Terabox — Full konten</span>';
      downloadsWrap.appendChild(b);
    }
  }

  function fmt(s){
    if(!isFinite(s)) return "0:00";
    const sec = Math.floor(s%60).toString().padStart(2,'0');
    const min = Math.floor(s/60);
    return `${min}:${sec}`;
  }

  function setLoading(v){ loadingEl.style.visibility = v ? 'visible' : 'hidden'; }

  // loading & metadata events
  video.addEventListener('loadedmetadata', () => {
    durationT.textContent = fmt(video.duration);
    seek.max = video.duration || 100;
    setLoading(false);
  });
  video.addEventListener('waiting', ()=> setLoading(true));
  video.addEventListener('stalled', ()=> setLoading(true));
  video.addEventListener('canplay', ()=> setLoading(false));
  video.addEventListener('canplaythrough', ()=> setLoading(false));

  // timeupdate
  video.addEventListener('timeupdate', () => {
    if(!isSeeking){ seek.value = video.currentTime; currentT.textContent = fmt(video.currentTime); }
  });
  seek.addEventListener('input', ()=> { isSeeking = true; currentT.textContent = fmt(seek.value); });
  seek.addEventListener('change', ()=> { video.currentTime = Number(seek.value); isSeeking = false; });

  // play/pause
  function togglePlay(){ if(video.paused) video.play(); else video.pause(); }
  playBtn.addEventListener('click', togglePlay);
  thumbBtn.addEventListener('click', ()=> { togglePlay(); thumbPlay.style.display = 'none'; });
  video.addEventListener('click', togglePlay);

  video.addEventListener('play', ()=> { playBtn.innerHTML = '<i class="bi bi-pause-fill"></i> Pause'; thumbPlay.style.display = 'none'; });
  video.addEventListener('pause', ()=> { playBtn.innerHTML = '<i class="bi bi-play-fill"></i> Play'; thumbPlay.style.display = ''; });

  // prev/next: load new video but DO NOT autoplay
  prevBtn.addEventListener('click', ()=> {
    if(videos.length === 0) return;
    idx = idx > 0 ? idx - 1 : videos.length - 1;
    loadIndex(idx, {autoPlay:false});
  });
  nextBtn.addEventListener('click', ()=> {
    if(videos.length === 0) return;
    idx = idx < videos.length - 1 ? idx + 1 : 0;
    loadIndex(idx, {autoPlay:false});
  });

  function loadIndex(i, {autoPlay=false} = {}){
    idx = i;
    setLoading(true);
    video.pause();
    video.src = videos[i];
    video.load();
    thumbPlay.style.display = '';
    if(autoPlay){ video.play().catch(()=>{}); thumbPlay.style.display = 'none'; }
  }

  // loop toggle
  loopBtn.addEventListener('click', ()=> { video.loop = !video.loop; loopBtn.classList.toggle('btn-primary', video.loop); loopBtn.classList.toggle('btn-outline-light', !video.loop); });

  // speed selector
  speedSel.addEventListener('change', ()=> { video.playbackRate = Number(speedSel.value); });

  // fullscreen (player area)
  document.getElementById('fs')?.addEventListener('click', ()=> {
    const el = document.querySelector('.video-area');
    if(!document.fullscreenElement) el.requestFullscreen().catch(()=>{});
    else document.exitFullscreen();
  });

  // ended: leave paused
  video.addEventListener('ended', ()=> { /* leave paused */ });

  // download current video (tries anchor, then fetch->blob, else open)
  async function downloadCurrentVideo(){
    const src = video.currentSrc || video.src;
    if(!src){ alert('Tidak ada video untuk diunduh.'); return; }
    const safeTitle = titleEl.textContent.trim().replace(/\s+/g,'_').replace(/[^\w\-_.]/g,'');
    const filename = `${safeTitle}_bagian${idx+1}.mp4`;
    try{
      const a = document.createElement('a');
      a.href = src;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      return;
    }catch(e){}
    try{
      const res = await fetch(src, { mode: 'cors' });
      if(!res.ok) throw new Error('fetch failed');
      const blob = await res.blob();
      const url = URL.createObjectURL(blob);
      const a2 = document.createElement('a');
      a2.href = url;
      a2.download = filename;
      document.body.appendChild(a2);
      a2.click();
      document.body.removeChild(a2);
      setTimeout(()=> URL.revokeObjectURL(url), 60000);
      return;
    }catch(err){
      window.open(src, '_blank', 'noopener');
    }
  }
  dlBtn.addEventListener('click', downloadCurrentVideo);

  // keyboard shortcuts
  window.addEventListener('keydown', (e)=> {
    if(['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) return;
    if(e.code === 'Space'){ e.preventDefault(); togglePlay(); }
    if(e.code === 'ArrowLeft'){ video.currentTime = Math.max(0, video.currentTime - 5); }
    if(e.code === 'ArrowRight'){ video.currentTime = Math.min(video.duration || 0, video.currentTime + 5); }
    if(e.key === 'm'){ video.muted = !video.muted; }
  });

  // block right-click
  document.addEventListener('contextmenu', e => e.preventDefault());

  // init UI
  buildDownloadButtons();
  setLoading(true);
  video.load();
</script>

<!-- iklan (default) -->
<script>(function(s){s.dataset.zone='9964278',s.src='https://al5sm.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
</body>
</html>
